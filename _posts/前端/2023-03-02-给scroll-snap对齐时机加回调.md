---
categories: [å‰ç«¯, JS]
tags: [JS]
---

## é—®é¢˜æè¿°

`scroll-snap`åœ¨å±•ç¤ºä¸€äº›æ»šåŠ¨å…ƒç´ çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œèƒ½åšå‡ºä¸€äº›ç±»ä¼¼swiperè½®æ’­çš„æ•ˆæœã€‚
ä½†
>è¯¦ç»†å…³äº`scroll-snap`çš„ä»‹ç»ç‚¹è¿™é‡Œ ğŸ‘‰ğŸ» [ä¼ é€é—¨]({%link _posts/å‰ç«¯/2023-03-01-CSSå±æ€§å­¦ä¹ .md%})

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€

ç®€å•æ— è„‘çš„ç¬¨æ–¹æ³•
ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œè®°å½•ä¸Šä¸€æ¬¡æ»šåŠ¨äº‹ä»¶è§¦å‘æ—¶çš„ä½ç½®å’Œå½“æ¬¡åšæ¯”è¾ƒï¼Œå¦‚æœä½ç½®æ²¡åŠ¨åˆ™æ»šåŠ¨ç»“æŸï¼Œæ‰§è¡Œå›è°ƒ
```javascript
// å®šæ—¶å™¨ï¼Œç”¨æ¥æ£€æµ‹æ°´å¹³æ»šåŠ¨æ˜¯å¦ç»“æŸ
var timer = null;
// ä¸Šä¸€æ¬¡æ»šåŠ¨çš„è·ç¦»
var scrollLeft = 0, scrollTop = 0;
// æ»šåŠ¨äº‹ä»¶å¼€å§‹
container.addEventListener('scroll', function () {
    clearInterval(timer);
    // é‡æ–°æ–°çš„å®šæ—¶å™¨
    timer = setInterval(function () {
        if (container.scrollLeft == scrollLeft && container.scrollTop == scrollTop) {
            // æ»šåŠ¨è·ç¦»ç›¸ç­‰ï¼Œè®¤ä¸ºåœæ­¢æ»šåŠ¨äº†
            clearInterval(timer);
            // ... åšä½ æƒ³åšçš„äº‹æƒ…ï¼Œå¦‚å›è°ƒå¤„ç†
        } else {
            // å¦åˆ™ï¼Œä¾ç„¶è®°ä½ä¸Šä¸€æ¬¡æ»šåŠ¨ä½ç½®
            scrollLeft = container.scrollLeft;
            scrollTop = container.scrollTop;
        }
    }, 100);
});
```

### æ–¹æ¡ˆäºŒ

ç±»ä¼¼å®ç°ç§»åŠ¨ç«¯åŒå‡»æ•ˆæœçš„æ–¹æ³•
ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯æ¬¡è§¦å‘äº‹ä»¶éƒ½å…ˆæ¸…è®¡æ—¶å™¨ï¼Œå†å»ºæ–°çš„è®¡æ—¶å™¨ï¼Œåªæœ‰æœ€åä¸€æ¬¡æ»šåŠ¨äº‹ä»¶è§¦å‘ï¼Œåé¢ä¸ä¼šå†æ¸…é™¤è®¡æ—¶å™¨äº†ï¼Œè®¡æ—¶å™¨å†…çš„å›è°ƒæ‰ä¼šæ‰§è¡Œï¼Œè®¡æ—¶å™¨çš„æ—¶é—´å°äºæ»šåŠ¨äº‹ä»¶çš„è§¦å‘é—´éš”å³å¯
```javascript
// å®šæ—¶å™¨ï¼Œç”¨æ¥æ£€æµ‹æ°´å¹³æ»šåŠ¨æ˜¯å¦ç»“æŸ
var timer = null;
// æ»šåŠ¨äº‹ä»¶å¼€å§‹
container.addEventListener('scroll', function () {
    clearTimeout(timer);
    // é‡æ–°æ–°çš„å®šæ—¶å™¨
    timer = setTimeout(function () {
        // æ— æ»šåŠ¨äº‹ä»¶è§¦å‘ï¼Œè®¤ä¸ºåœæ­¢æ»šåŠ¨äº†
        // ... åšä½ æƒ³åšçš„äº‹æƒ…ï¼Œå¦‚å›è°ƒå¤„ç†
    }, 100);
});
```

### æ–¹æ¡ˆä¸‰

æ£€æµ‹æ»šåŠ¨åŒºåŸŸå­å…ƒç´ 
ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œè·å–*æ‰€æœ‰å­å…ƒç´ è·ç¦»è§†çª—è¾¹ç¼˜çš„è·ç¦»*å’Œ*æ»šåŠ¨å®¹å™¨è·ç¦»è§†çª—è¾¹ç¼˜çš„è·ç¦»*ä½œæ¯”è¾ƒï¼Œé‚£ä¸ªå…ƒç´ å’Œå®¹å™¨çš„ä¸€æ ·ï¼Œå°±æ˜¯å“ªä¸ªå…ƒç´ åˆ°ä½äº†
```javascript
[].slice.call(container.children).forEach(function (ele, index) {
    if (Math.abs(ele.getBoundingClientRect().left - container.getBoundingClientRect().left) < 10) {
        // æ­¤åˆ»çš„eleå…ƒç´ å°±æ˜¯å½“å‰å®šä½çš„å…ƒç´ 
        // ... ä½ å¯ä»¥å¯¹eleåšä½ æƒ³åšçš„äº‹æƒ…
    } else {
        // æ­¤åˆ»çš„eleå…ƒç´ ä¸æ˜¯å½“å‰å®šä½çš„å…ƒç´ 
    }
});
```

