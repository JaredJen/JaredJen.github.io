---
layout: post
title: githubå¤šè´¦å·ç®¡ç†
categories:
- å·¥å…·
- Git
tags:
- Git
date: 2024-03-16 21:46 +0800
---
## é—®é¢˜

å½“æˆ‘ä»¬æœ‰å¤šä¸ªgithubè´¦æˆ·æ—¶ï¼Œæˆ‘ä»¬æäº¤ä»£ç ä¼šé‡åˆ°æƒé™é”™è¯¯

```text
ERROR: Permission to xxx/xxx.github.io.git denied to xxx.
fatal: Could not read from remote repository.
```
{: file="æŠ¥é”™ä¿¡æ¯"}

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®©å½“å‰ä»“åº“çŸ¥é“è¯¥ç”¨å“ªä¸ªssh-keyæ¥æäº¤ä»£ç 

## åšæ³•
**1. æœ¬åœ°ç»™æ¯ä¸ªè´¦å·ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„å…¬é’¥**

```shell
ssh-keygen -t rsa -C "è´¦æˆ·1çš„githubé‚®ç®±"
ssh-keygen -t rsa -C "è´¦æˆ·2çš„githubé‚®ç®±"
```
{: file="ç”Ÿæˆå…¬é’¥"}
> â—ï¸åœ¨ç”Ÿæˆæ—¶ä¸è¦æ— è„‘ä¸‹ä¸€æ­¥ï¼Œä¸ç„¶åé¢ç”Ÿæˆçš„å…¬é’¥ä¼šè¦†ç›–å‰é¢ç”Ÿæˆçš„ï¼Œé‡åˆ°æ­¤æ¡æç¤ºä¸€å®šè¦ç»™ä¸åŒçš„å…¬é’¥åˆ†é…ä¸åŒçš„åå­—<br>
> Enter file in which to save the key (/Users/xxx/.ssh/id_rsa): path/to/your/id_rsa_acount1_github<br>
> Enter file in which to save the key (/Users/xxx/.ssh/id_rsa): path/to/your/id_rsa_acount2_github<br>
> Tips: æ–‡ä»¶åè‡ªå·±å®šä¹‰ä¸€ä¸ªå¥½è®°çš„åå­—å³å¯ï¼Œæœ€å¥½å’Œgithubè´¦å·æœ‰æ‰€å…³è”ï¼Œä¾¿äºç®¡ç†
{: .prompt-info}

**2. å°†ä¸¤ä¸ªå…¬é’¥åŠ å…¥ssh-agentä¸­**
```shell
ssh-add path/to/your/id_rsa_acount1_github
ssh-add path/to/your/id_rsa_acount2_github
```
{: file="åŠ å…¥ssh-agent"}

**3. ç»™ä¸åŒçš„å…¬é’¥é…ç½®ä¸åŒçš„Host**

ç”¨ä½ æœ€é¡ºæ‰‹çš„ç¼–è¾‘å™¨æ‰“å¼€~/.ssh/config

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±è‡ªå·±åˆ›å»ºä¸€ä¸ª

ç„¶åå°†ä¸‹é¢å†…å®¹æ”¾è¿›å»
```text
User            git
Host            acount1.github.com
HostName        github.com
IdentityFile    path/to/your/id_rsa_acount1_github

User            git
Host            acount2.github.com
HostName        github.com
IdentityFile    path/to/your/id_rsa_acount2_github
```
{: file="~/.ssh/config"}

**4. åœ¨github.comæ·»åŠ è‡ªå·±çš„ssh-key**

å°†æ¯ä¸ªssh-keyçš„å…¬é’¥(ä¹Ÿå°±æ˜¯åç¼€ä¸º.pubæ–‡ä»¶ä¸­çš„å†…å®¹)æ·»åŠ åˆ°<font color="orange">å¯¹åº”çš„</font>[githubçš„è´¦æˆ·sshé…ç½®](https://github.com/settings/keys)ä¸­
![githubå¤šè´¦å·ç®¡ç†20240316213307](https://s2.loli.net/2024/03/16/e53jrJwLNVyodtR.png)
_ä¸Šä¼ sshå…¬é’¥_

**<font id="keyStep">5. é…ç½®å½“å‰é¡¹ç›®çš„remoteé“¾æ¥</font>**

```shell
# å¦‚æœæ˜¯æ–°ä»“åº“
git remote add origin git@acount1.github.com:xxx/xxx.git
# å¦‚æœæ˜¯è€ä»“åº“
git remote set-url origin git@acount2.github.com:xxx/xxx.git
```

ğŸŒ° ä¸¾ä¸ªæ —å­ï¼š

åŸæœ¬çš„ä»“åº“remoteåœ°å€ä¸ºï¼šgit@<font color="orange">github.com</font>:xxx/xxx.git

å¦‚æœéœ€è¦è´¦æˆ·1æäº¤ï¼Œåˆ™å°†å…¶æ”¹ä¸ºï¼šgit@<font color="orange">acount1.github.com</font>:xxx/xxx.git

å¦‚æœéœ€è¦è´¦æˆ·2æäº¤ï¼Œåˆ™å°†å…¶æ”¹ä¸ºï¼šgit@<font color="orange">acount2.github.com</font>:xxx/xxx.git

ğŸ‰ ç„¶åå°±å¯ä»¥ä»¥å¯¹åº”è´¦æˆ·çš„sshä¸githubè¿›è¡ŒéªŒè¯ï¼Œé¡ºåˆ©æäº¤ä»£ç å•¦

## åŸç†

ä»”ç»†è§‚å¯Ÿ~/.ssh/configï¼Œå¹¶ç»“åˆä½¿ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°

- `User` æŒ‡çš„æ˜¯å¯¹æ¥è¿œç¨‹ä»“åº“çš„ç”¨æˆ·åæ˜¯ä»€ä¹ˆï¼Œå¯¹äºgithubæ¥è®²ï¼Œä¸€èˆ¬éƒ½æ˜¯git
- `Host` ç›¸å½“äºæˆ‘ä»¬è‡ªå·±ç»™è¿œç¨‹ä»“åº“çš„åŸŸåèµ·äº†ä¸ªå°å
- `HostName` æˆ‘ä»¬çš„å°ååŸæœ¬åº”è¯¥å«ä»€ä¹ˆ
- `IdentityFile` å½“æˆ‘ä»¬å«å°åæ—¶ï¼Œsshåº”è¯¥å»æ‰¾å“ªä¸€ä¸ªå…¬é’¥

[ç¬¬5æ­¥](#keyStep)ï¼Œå…¶å®å°±æ˜¯æŠŠä»“åº“é“¾æ¥é‡Œçš„å¤§å(github.com)æ”¹æˆäº†å°å(acount1.github.com)

å½“æˆ‘ä»¬æäº¤æ—¶ï¼Œsshå¯ä»¥é€šè¿‡å°å(acount1.github.com)æ‰¾åˆ°ä»–çš„å¤§å(github.com)ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¹äº†é“¾æ¥ä¹‹åå…¶å®ä¾ç„¶æäº¤åˆ°äº†å¤§å(github.com)é‡Œï¼Œå¹¶ä¸ä¼šé€ æˆå¼‚å¸¸

è€Œä¸åŒçš„å°åæ˜ å°„åˆ°äº†ä¸åŒçš„ssh-keyä¸Š

è¿™æ ·ï¼Œå°±å®ç°ç”¨æŒ‡å®šè´¦æˆ·çš„ssh-keyæäº¤ä»£ç äº†
